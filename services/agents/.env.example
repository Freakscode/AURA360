# Configuración del Servicio de Agentes Holísticos
# Copia este archivo a .env y ajusta los valores según tu entorno

# ==============================================================================
# SERVICIO VECTORIAL / QDRANT
# ==============================================================================

# Qdrant URL
# Para desarrollo local (docker-compose.dev.yml):
AGENT_SERVICE_QDRANT_URL=http://localhost:6333

# Para producción (Qdrant Cloud en GCP):
# AGENT_SERVICE_QDRANT_URL=https://your-cluster-id.us-central1-0.gcp.cloud.qdrant.io:6333

# Qdrant API Key (requerido para Qdrant Cloud)
# Obtenerla desde: https://cloud.qdrant.io/clusters
AGENT_SERVICE_QDRANT_API_KEY=

# Collection Configuration
AGENT_SERVICE_VECTOR_COLLECTION=holistic_agents

# Connection Settings
AGENT_SERVICE_TIMEOUT=30
AGENT_SERVICE_VECTOR_VERIFY_SSL=true  # true para Qdrant Cloud (HTTPS)
AGENT_SERVICE_VECTOR_TOP_K=5
AGENT_SERVICE_VECTOR_RETRIES=2
AGENT_SERVICE_VECTOR_BACKOFF=1.0

# ==============================================================================
# EMBEDDINGS
# ==============================================================================
# Opciones para AGENT_DEFAULT_EMBEDDING_MODEL:
# - FastEmbed (local, sin API key):
#   * sentence-transformers/all-MiniLM-L6-v2 (rápido, inglés)
#   * sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2 (multilingüe, español)
#
# - Gemini (requiere GOOGLE_API_KEY):
#   * models/text-embedding-004 (alta calidad, Google)

# Modelo de embeddings (cambia según tu backend)
AGENT_DEFAULT_EMBEDDING_MODEL=models/text-embedding-004

# Backend de embeddings: "fastembed" o "gemini"
AGENT_SERVICE_EMBEDDING_BACKEND=gemini

# Normalizar embeddings (true/false)
AGENT_SERVICE_EMBEDDING_NORMALIZE=true

# API Key para embeddings (solo si usas backend=gemini)
AGENT_SERVICE_EMBEDDING_API_KEY=AIzaSyDurj7hebJLQkLqhqcDikRbg17QK1qsW64

# Google API Key (para Gemini y otros servicios de Google)
GOOGLE_API_KEY=AIzaSyDurj7hebJLQkLqhqcDikRbg17QK1qsW64

# ==============================================================================
# CONFIGURACIÓN DEL SERVICIO
# ==============================================================================
AGENT_SERVICE_MODEL_VERSION=1.0.0
AGENT_SERVICE_RECOMMENDATION_HORIZON_DAYS=21

# ==============================================================================
# VARIABLES LEGACY (soportadas para compatibilidad)
# ==============================================================================
# Puedes usar estas en lugar de las AGENT_SERVICE_* si prefieres
VECTOR_SERVICE_URL=http://localhost:6333
VECTOR_SERVICE_API_KEY=
VECTOR_SERVICE_COLLECTION_NAME=docs
VECTOR_SERVICE_TIMEOUT=30
VECTOR_SERVICE_VERIFY_SSL=false

EMBEDDING_MODEL=sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2
EMBEDDING_BACKEND=fastembed
EMBEDDING_NORMALIZE=true

# ==============================================================================
# KAFKA CONFIGURATION (Event-Driven Architecture)
# ==============================================================================

# Para desarrollo local (docker-compose.dev.yml):
# KAFKA_BOOTSTRAP_SERVERS=localhost:9092
# KAFKA_SECURITY_PROTOCOL=PLAINTEXT
# KAFKA_SASL_MECHANISM=
# KAFKA_API_KEY=
# KAFKA_API_SECRET=

# Para producción (Confluent Cloud):
KAFKA_BOOTSTRAP_SERVERS=pkc-xxxxx.us-east-1.aws.confluent.cloud:9092
KAFKA_API_KEY=your-kafka-api-key
KAFKA_API_SECRET=your-kafka-api-secret
KAFKA_SECURITY_PROTOCOL=SASL_SSL
KAFKA_SASL_MECHANISM=PLAIN

# Kafka Topics (AURA360 event topics)
KAFKA_TOPIC_USER_EVENTS=aura360.user.events
KAFKA_TOPIC_CONTEXT_AGGREGATED=aura360.context.aggregated
KAFKA_TOPIC_CONTEXT_VECTORIZED=aura360.context.vectorized
KAFKA_TOPIC_GUARDIAN_REQUESTS=aura360.guardian.requests
KAFKA_TOPIC_GUARDIAN_RESPONSES=aura360.guardian.responses
KAFKA_TOPIC_VECTORDB_INGEST=aura360.vectordb.ingest

# Kafka Consumer Settings (Agents Service)
KAFKA_CONSUMER_GROUP_ID=aura360-agents
KAFKA_CONSUMER_AUTO_OFFSET_RESET=earliest
KAFKA_CONSUMER_ENABLE_AUTO_COMMIT=true
KAFKA_CONSUMER_MAX_POLL_RECORDS=100
KAFKA_CONSUMER_SESSION_TIMEOUT_MS=30000
KAFKA_CONSUMER_MAX_POLL_INTERVAL_MS=300000

# Kafka Producer Settings (for Guardian responses)
KAFKA_PRODUCER_ACKS=1
KAFKA_PRODUCER_RETRIES=3
KAFKA_PRODUCER_MAX_IN_FLIGHT=5
KAFKA_PRODUCER_COMPRESSION_TYPE=snappy

# Feature Flags
KAFKA_ENABLED=true
KAFKA_ASYNC_PROCESSING=true
