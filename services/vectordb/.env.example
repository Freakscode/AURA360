# ==============================================================================
# VECTORDB SERVICE CONFIGURATION
# ==============================================================================

# Google Cloud Platform Configuration
GCS_PROJECT=your-gcp-project-id
GCS_CREDENTIALS_PATH=/path/to/credentials.json

# ==============================================================================
# QDRANT CONFIGURATION
# ==============================================================================

# Qdrant URL
# Para desarrollo local (docker-compose.dev.yml):
QDRANT_URL=http://localhost:6333

# Para producción (Qdrant Cloud):
# QDRANT_URL=https://your-cluster.qdrant.io

# Qdrant API Key (solo para producción)
QDRANT_API_KEY=

# Collection Configuration
VECTOR_COLLECTION_NAME=holistic_memory
VECTOR_DIMENSION=384

# ==============================================================================
# REDIS CONFIGURATION (Caching & Celery)
# ==============================================================================

# Para desarrollo local:
REDIS_URL=redis://localhost:6379/0

# Para producción (Railway, Upstash, etc):
# REDIS_URL=redis://user:password@host:port/0

REDIS_CACHE_TTL=3600
REDIS_CACHE_ENABLED=true

# ==============================================================================
# CELERY CONFIGURATION (Batch Processing)
# ==============================================================================

CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0
CELERY_TASK_TRACK_STARTED=true
CELERY_TASK_TIME_LIMIT=300
CELERY_WORKER_PREFETCH_MULTIPLIER=4

# ==============================================================================
# EMBEDDINGS CONFIGURATION
# ==============================================================================

# Embedding model (FastEmbed compatible)
# Options:
#   - sentence-transformers/all-MiniLM-L6-v2 (rápido, inglés, 384 dim)
#   - sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2 (multilingüe, 384 dim)
DEFAULT_EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2

# Embedding Backend: "fastembed" (local) or "gemini" (API)
EMBEDDING_BACKEND=fastembed

# Para Gemini (opcional):
# EMBEDDING_BACKEND=gemini
# GOOGLE_API_KEY=your-gemini-api-key

# ==============================================================================
# TOPIC CLASSIFICATION CONFIGURATION
# ==============================================================================

AUTO_TOPICS=true
TOPIC_SIM_THRESHOLD=0.34
TOPIC_TOP_K=3

# ==============================================================================
# GROBID CONFIGURATION (PDF Processing)
# ==============================================================================

# Para desarrollo local (docker-compose.dev.yml):
GROBID_URL=http://localhost:8070

# Para producción:
# GROBID_URL=http://grobid-service:8070

GROBID_TIMEOUT=60
GROBID_MAX_RETRIES=3

# ==============================================================================
# KAFKA CONFIGURATION (Event-Driven Architecture)
# ==============================================================================

# Para desarrollo local (docker-compose.dev.yml):
# KAFKA_BOOTSTRAP_SERVERS=localhost:9092
# KAFKA_SECURITY_PROTOCOL=PLAINTEXT
# KAFKA_SASL_MECHANISM=
# KAFKA_API_KEY=
# KAFKA_API_SECRET=

# Para producción (Confluent Cloud):
KAFKA_BOOTSTRAP_SERVERS=pkc-xxxxx.us-east-1.aws.confluent.cloud:9092
KAFKA_API_KEY=your-kafka-api-key
KAFKA_API_SECRET=your-kafka-api-secret
KAFKA_SECURITY_PROTOCOL=SASL_SSL
KAFKA_SASL_MECHANISM=PLAIN

# Kafka Topics (AURA360 event topics)
KAFKA_TOPIC_USER_EVENTS=aura360.user.events
KAFKA_TOPIC_CONTEXT_AGGREGATED=aura360.context.aggregated
KAFKA_TOPIC_CONTEXT_VECTORIZED=aura360.context.vectorized
KAFKA_TOPIC_GUARDIAN_REQUESTS=aura360.guardian.requests
KAFKA_TOPIC_GUARDIAN_RESPONSES=aura360.guardian.responses
KAFKA_TOPIC_VECTORDB_INGEST=aura360.vectordb.ingest

# Kafka Consumer Settings (Vectordb Service)
KAFKA_CONSUMER_GROUP_ID=aura360-vectordb
KAFKA_CONSUMER_AUTO_OFFSET_RESET=earliest
KAFKA_CONSUMER_ENABLE_AUTO_COMMIT=true
KAFKA_CONSUMER_MAX_POLL_RECORDS=100
KAFKA_CONSUMER_SESSION_TIMEOUT_MS=30000
KAFKA_CONSUMER_MAX_POLL_INTERVAL_MS=300000

# Kafka Producer Settings (for context events)
KAFKA_PRODUCER_ACKS=1
KAFKA_PRODUCER_RETRIES=3
KAFKA_PRODUCER_MAX_IN_FLIGHT=5
KAFKA_PRODUCER_COMPRESSION_TYPE=snappy

# Feature Flags
KAFKA_ENABLED=true
KAFKA_ASYNC_PROCESSING=true

# ==============================================================================
# API CONFIGURATION
# ==============================================================================

API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_RELOAD=false

# Logging
LOG_LEVEL=INFO
LOG_FORMAT=json

# ==============================================================================
# SECURITY
# ==============================================================================

# API Key for internal service authentication (optional)
API_KEY=

# CORS Configuration
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080

# ==============================================================================
# FEATURE FLAGS
# ==============================================================================

# Enable/disable features
ENABLE_VECTOR_SEARCH=true
ENABLE_TOPIC_CLASSIFICATION=true
ENABLE_PDF_PROCESSING=true
ENABLE_CACHE=true
ENABLE_TELEMETRY=false
