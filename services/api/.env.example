# Django Configuration
SECRET_KEY=your-secret-key-here-change-in-production
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1

# Database Configuration (PostgreSQL/Supabase)
# Para desarrollo local (Supabase local):
DB_ENGINE=django.db.backends.postgresql
DB_NAME=postgres
DB_USER=postgres
DB_PASSWORD=your-password-here
DB_HOST=localhost
DB_PORT=54322

# Para producción (Supabase Cloud):
# DB_HOST=aws-0-us-east-1.pooler.supabase.com
# DB_PORT=6543  # Connection Pooler (recomendado)
# DB_USER=postgres.abcdefghijklmnop
# DB_PASSWORD=your-supabase-password
# CONN_MAX_AGE=600  # Enable connection pooling (10 min)

# Supabase Configuration (opcional, para conectar con Supabase directamente)
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your-anon-key-here

# CORS Configuration
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080

# API Configuration
API_VERSION=v1

# Supabase Auth (JWT validation)
# Para instalaciones modernas usa JWKS; deja el secret únicamente como fallback legado.
SUPABASE_JWKS_URL=https://your-project.supabase.co/auth/v1/.well-known/jwks.json
SUPABASE_JWKS_CACHE_TTL=1200
# Opcional: usar un archivo local cuando trabajes offline
# SUPABASE_JWKS_FILE=../supabase/signing/key.json
# Opcional: fallback HS256 legado (se recomienda dejarlo vacío en proyectos nuevos)
SUPABASE_JWT_SECRET=

# ==============================================================================
# MESSAGING BACKEND CONFIGURATION (Event-Driven Architecture)
# ==============================================================================

# Backend type: "kafka" (production), "celery" (fallback), or "disabled" (testing)
MESSAGING_BACKEND=kafka

# ------------------------------------------------------------------------------
# KAFKA CONFIGURATION
# ------------------------------------------------------------------------------

# Para desarrollo local (docker-compose.dev.yml):
# KAFKA_BOOTSTRAP_SERVERS=localhost:9092
# KAFKA_SECURITY_PROTOCOL=PLAINTEXT
# KAFKA_SASL_MECHANISM=
# KAFKA_API_KEY=
# KAFKA_API_SECRET=

# Para producción (Confluent Cloud):
KAFKA_BOOTSTRAP_SERVERS=pkc-xxxxx.us-east-1.aws.confluent.cloud:9092
KAFKA_API_KEY=your-kafka-api-key
KAFKA_API_SECRET=your-kafka-api-secret
KAFKA_SECURITY_PROTOCOL=SASL_SSL
KAFKA_SASL_MECHANISM=PLAIN

# Kafka Topics (AURA360 event topics)
KAFKA_TOPIC_USER_EVENTS=aura360.user.events
KAFKA_TOPIC_CONTEXT_AGGREGATED=aura360.context.aggregated
KAFKA_TOPIC_CONTEXT_VECTORIZED=aura360.context.vectorized
KAFKA_TOPIC_GUARDIAN_REQUESTS=aura360.guardian.requests
KAFKA_TOPIC_GUARDIAN_RESPONSES=aura360.guardian.responses
KAFKA_TOPIC_VECTORDB_INGEST=aura360.vectordb.ingest

# Kafka Producer Settings
KAFKA_PRODUCER_ACKS=1
KAFKA_PRODUCER_RETRIES=3
KAFKA_PRODUCER_MAX_IN_FLIGHT=5
KAFKA_PRODUCER_COMPRESSION_TYPE=snappy
KAFKA_PRODUCER_LINGER_MS=10
KAFKA_PRODUCER_BATCH_SIZE=16384

# Kafka Consumer Settings (si se implementan consumers en Django)
KAFKA_CONSUMER_GROUP_ID=aura360-api
KAFKA_CONSUMER_AUTO_OFFSET_RESET=earliest
KAFKA_CONSUMER_ENABLE_AUTO_COMMIT=true
KAFKA_CONSUMER_MAX_POLL_RECORDS=500

# Feature Flags
KAFKA_ENABLED=true
KAFKA_ASYNC_PUBLISHING=true

# ------------------------------------------------------------------------------
# CELERY CONFIGURATION (Fallback mode)
# ------------------------------------------------------------------------------

# Required for MESSAGING_BACKEND=celery
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0
